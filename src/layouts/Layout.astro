---
interface Props {
  title: string;
  description?: string;
}

const { title, description = "Edwards & Smith Buyers Agents - Your trusted advisors in property" } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />

    <!-- Preconnect to critical external domains (max 4 for best performance) -->
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://us-assets.i.posthog.com">
    <link rel="dns-prefetch" href="https://js-ap1.hs-scripts.com">
    <link rel="dns-prefetch" href="https://js-ap1.hscollectedforms.net">
    <link rel="dns-prefetch" href="https://js-ap1.hs-analytics.net">

    <!-- Preload critical resources for better LCP -->
    <link rel="preload" href="/assets/images/hero-poster.jpg" as="image" fetchpriority="high">

    <link rel="icon" href="/favicon-32x32.png" sizes="32x32" />
    <link rel="icon" href="/favicon.png" sizes="192x192" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <title>{title}</title>

    <!-- Google Fonts with optimized loading -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Belleza&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Belleza&display=swap"></noscript>

    <!-- LocalBusiness Schema Markup for SEO/AEO -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "RealEstateAgent",
        "name": "Edwards & Smith Buyers Agents",
        "url": "https://edwardsandsmith.com.au",
        "logo": "/assets/images/Cream-Green-Minimalist-Fashion-Collection-Banner-e1736837350367.png",
        "description": "Expert buyers agents in Brisbane, Gold Coast, and Bali. Founded by former AFL players Jake Edwards and Ely Smith. Helping interstate buyers, busy professionals, and families find their dream properties.",
        "telephone": "+61-413-245-022",
        "email": "info@edwardsandsmith.com.au",
        "address": [
          {
            "@type": "PostalAddress",
            "streetAddress": "668 Wynnum Road",
            "addressLocality": "Morningside",
            "addressRegion": "QLD",
            "postalCode": "4170",
            "addressCountry": "AU"
          },
          {
            "@type": "PostalAddress",
            "streetAddress": "1 Ern Harley Drive",
            "addressLocality": "Burleigh Heads",
            "addressRegion": "QLD",
            "postalCode": "4220",
            "addressCountry": "AU"
          }
        ],
        "areaServed": [
          {
            "@type": "City",
            "name": "Brisbane",
            "sameAs": "https://en.wikipedia.org/wiki/Brisbane"
          },
          {
            "@type": "City",
            "name": "Gold Coast",
            "sameAs": "https://en.wikipedia.org/wiki/Gold_Coast,_Queensland"
          },
          {
            "@type": "Place",
            "name": "Bali",
            "sameAs": "https://en.wikipedia.org/wiki/Bali"
          }
        ],
        "priceRange": "$1500000-$3000000",
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "5.0",
          "reviewCount": "50"
        },
        "founder": [
          {
            "@type": "Person",
            "name": "Jake Edwards",
            "jobTitle": "Co-Founder & Buyers Agent",
            "description": "Former Carlton AFL player with extensive property investment experience"
          },
          {
            "@type": "Person",
            "name": "Ely Smith",
            "jobTitle": "Co-Founder & Buyers Agent",
            "description": "Former Brisbane Lions AFL player specializing in buyers advocacy"
          }
        ]
      }
    </script>
  </head>
  <body>
    <slot />

    <!-- Analytics scripts loaded after page content (non-blocking) -->
    <!-- Google Analytics - Delayed load for better performance -->
    <script is:inline>
      // Delay Google Analytics until page is fully loaded OR user interacts
      function loadGoogleAnalytics() {
        // Load gtag.js script
        var script = document.createElement('script');
        script.async = true;
        script.src = 'https://www.googletagmanager.com/gtag/js?id=G-0W30ZS0JD1';
        document.head.appendChild(script);

        // Initialize dataLayer
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-0W30ZS0JD1');
      }

      // Load Google Analytics after page interaction OR after 2 seconds
      var gaLoaded = false;
      function initGA() {
        if (!gaLoaded) {
          gaLoaded = true;
          loadGoogleAnalytics();
        }
      }

      // Load on user interaction
      ['mousemove', 'scroll', 'keydown', 'click', 'touchstart'].forEach(function(event) {
        window.addEventListener(event, initGA, { once: true, passive: true });
      });

      // Or load after 2 seconds if no interaction
      setTimeout(initGA, 2000);
    </script>

    <!-- PostHog Analytics - Delayed load for better performance -->
    <script is:inline>
      // Delay PostHog until page is fully loaded + 2 seconds OR user interacts
      function loadPostHog() {
        !function(t,e){var o,n,p,r;e.__SV||(window.posthog && window.posthog.__loaded)||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init hi Sr Er ui yr wr capture Ti calculateEventProperties Pr register register_once register_for_session unregister unregister_for_session Cr getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSurveysLoaded onSessionId getSurveys getActiveMatchingSurveys renderSurvey displaySurvey canRenderSurvey canRenderSurveyAsync identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty Rr kr createPersonProfile Tr Or opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing get_explicit_consent_status is_capturing clear_opt_in_out_capturing $r debug L Ir getPageViewId captureTraceFeedback captureTraceMetric".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
        posthog.init('phc_C1eZKyyxWvuAMLXwbrlCQQo0Us6NBUcBdor44XVnDCi', {
          api_host: 'https://us.i.posthog.com',
          defaults: '2025-05-24',
          person_profiles: 'identified_only',
        });
      }

      // Load PostHog after page interaction OR after 3 seconds
      var posthogLoaded = false;
      function initPostHog() {
        if (!posthogLoaded) {
          posthogLoaded = true;
          loadPostHog();
        }
      }

      // Load on user interaction
      ['mousemove', 'scroll', 'keydown', 'click', 'touchstart'].forEach(function(event) {
        window.addEventListener(event, initPostHog, { once: true, passive: true });
      });

      // Or load after 3 seconds if no interaction
      setTimeout(initPostHog, 3000);
    </script>
  </body>
</html>

<style is:global>
  @import '../styles/global.css';
</style>
