---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import OffMarketPropertyCard from '../components/OffMarketPropertyCard.astro';
---

<Layout
  title="Pre & Off-Market Properties Brisbane, Gold Coast & Bali | Edwards & Smith"
  description="Get exclusive access to pre & off-market properties before they hit the market. Brisbane, Gold Coast & Bali off-market opportunities with Edwards & Smith Buyers Agents."
>
  <Header />
  <main>
    <!-- Hero Section -->
    <section class="offmarket-hero section">
      <div class="container">
        <h1>Exclusive Pre & Off-Market Properties</h1>
        <p class="hero-subtitle">Access properties before they hit the public market</p>
      </div>
    </section>
    <!-- Breadcrumbs -->
    <section class="page-header">
      <div class="container">
        <div class="breadcrumb-row">
          <div class="breadcrumb">
            <a href="/">Home</a> / <span>Off-Market Properties</span>
          </div>
          <div class="last-updated">Last Updated: 8 October 2025</div>
        </div>
      </div>
    </section>

    <!-- What is Pre-Market vs Off-Market Section -->
    <section class="info-section section">
      <div class="container">
        <div class="section-header">
          <h2>Understanding Pre-Market & Off-Market Properties</h2>
          <p class="section-intro">As trusted buyers agents, we receive pre & off-market properties from real estate agents looking for serious, finance-approved buyers. Get early access to these exclusive opportunities.</p>
        </div>
        <div class="info-grid">
          <div class="info-card">
            <h3>What is a Pre-Market Property?</h3>
            <p>
              A pre-market property is one that will soon be listed publicly, but the agent offers it
              to serious buyers first. This gives you 1-2 weeks head start before public competition begins.
            </p>
            <ul>
              <li>First access before public listing</li>
              <li>Less competition from other buyers</li>
              <li>Better negotiating position</li>
              <li>Time to do due diligence before auction/sale</li>
            </ul>
          </div>
          <div class="info-card">
            <h3>What is an Off-Market Property?</h3>
            <p>
              An off-market property is sold privately without any public advertising. The seller wants
              a quiet, confidential sale and the agent brings it to qualified buyers only.
            </p>
            <ul>
              <li>No public competition</li>
              <li>Confidential sale process</li>
              <li>Often below market value</li>
              <li>Exclusive access for approved buyers</li>
            </ul>
          </div>
        </div>
        <div class="why-us">
          <h3>Why Do Agents Come to Us First?</h3>
          <p>
            Real estate agents want to bring properties to <strong>serious buyers with finance approval</strong>.
            They know buyers agents represent qualified clients ready to move quickly. This is why we get
            first access to pre & off-market opportunities that never reach the public.
          </p>
        </div>
      </div>
    </section>

    <!-- Current Off-Market Opportunities -->
    <section class="current-opportunities section">
      <div class="container-wide">
        <div class="section-header">
          <h2>Current Off-Market Opportunities</h2>
          <p class="section-intro">
            These are some of our current pre & off-market properties. Book a consultation to receive
            full property details including the exact address.
          </p>
        </div>

        <!-- Quick Navigation -->
        <div class="location-filters">
          <a href="#brisbane" class="filter-btn">Brisbane</a>
          <a href="#goldcoast" class="filter-btn">Gold Coast</a>
          <a href="#bali" class="filter-btn">Bali</a>
        </div>

        <!-- Brisbane Properties -->
        <div id="brisbane" class="location-section">
          <h3>Brisbane Off-Market Properties</h3>
          <div class="properties-grid">
            <OffMarketPropertyCard
              suburb="Cypress Court, Minyama"
              region="Brisbane - Sunshine Coast"
              beds={5}
              baths={4}
              cars={4}
              price="$24M"
              image="https://images.unsplash.com/photo-1613490493576-7fde63acd811?w=800"
            />
            <OffMarketPropertyCard
              suburb="Rochedale Road, Rochedale"
              region="Brisbane South"
              beds={4}
              baths={2}
              cars={2}
              price="$7.5M"
              image="https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800"
            />
            <OffMarketPropertyCard
              suburb="Fielding Street, Mount Gravatt"
              region="Brisbane South"
              beds={3}
              baths={1}
              cars={2}
              price="$1.3M"
              image="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800"
            />
          </div>
          <a href="/off-market-brisbane" class="view-all-btn">View All Brisbane Off-Market Properties →</a>
        </div>

        <!-- Gold Coast Properties -->
        <div id="goldcoast" class="location-section">
          <h3>Gold Coast Off-Market Properties</h3>
          <div class="properties-grid">
            <OffMarketPropertyCard
              suburb="Mallawa Drive, Palm Beach"
              region="Gold Coast - Beachside"
              beds={4}
              baths={2}
              cars={2}
              price="$2.5M"
              image="https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800"
            />
            <OffMarketPropertyCard
              suburb="Nuthatch Drive, Burleigh Waters"
              region="Gold Coast"
              beds={4}
              baths={2}
              cars={2}
              price="$2.7M"
              image="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800"
            />
            <OffMarketPropertyCard
              suburb="Wagtail Court, Burleigh Waters"
              region="Gold Coast"
              beds={3}
              baths={2}
              cars={2}
              price="$1.3M"
              image="https://images.unsplash.com/photo-1600566753190-17f0baa2a6c3?w=800"
            />
          </div>
          <a href="/off-market-gold-coast" class="view-all-btn">View All Gold Coast Off-Market Properties →</a>
        </div>

        <!-- Bali Properties -->
        <div id="bali" class="location-section">
          <h3>Bali Off-Market Villas</h3>
          <div class="properties-grid">
            <OffMarketPropertyCard
              suburb="Uluwatu"
              region="Bali"
              beds={2}
              baths={2}
              pool={true}
              price="$350,000 USD"
              distanceToBeach="5 minutes to the beach"
              image="https://images.unsplash.com/photo-1537996194471-e657df975ab4?w=800"
            />
            <OffMarketPropertyCard
              suburb="Canggu"
              region="Bali"
              beds={2}
              baths={2}
              pool={true}
              price="$220,000 USD"
              distanceToBeach="2 minutes from the beach"
              image="https://images.unsplash.com/photo-1582610116397-edb318620f90?w=800"
            />
            <OffMarketPropertyCard
              suburb="Seminyak"
              region="Bali"
              beds={3}
              baths={3}
              pool={true}
              price="$480,000 USD"
              distanceToBeach="1 minute to the beach"
              image="https://images.unsplash.com/photo-1602002418082-a4443e081dd1?w=800"
            />
          </div>
          <a href="/off-market-bali" class="view-all-btn">View All Bali Off-Market Villas →</a>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq-section section">
      <div class="container">
        <div class="section-header">
          <h2>Frequently Asked Questions</h2>
        </div>
        <div class="faq-grid">
          <div class="faq-item">
            <h3>How do I get access to off-market properties?</h3>
            <p>
              Simply register your interest through our website or book a free consultation. We'll discuss
              your requirements, budget, and timeline. Once we know you're a serious buyer, we'll start
              sending you off-market opportunities that match your criteria.
            </p>
          </div>
          <div class="faq-item">
            <h3>Do I need to be finance approved?</h3>
            <p>
              While not always required, having finance pre-approval significantly increases your chances
              of securing off-market properties. Sellers and agents want to work with buyers who can move quickly.
            </p>
          </div>
          <div class="faq-item">
            <h3>Are off-market properties cheaper?</h3>
            <p>
              Often yes. With no public competition and motivated sellers seeking a quiet sale, off-market
              properties can sell for 5-15% below market value. Plus, you save on auction stress and bidding wars.
            </p>
          </div>
          <div class="faq-item">
            <h3>What's the difference between pre-market and off-market?</h3>
            <p>
              Pre-market properties will be publicly listed soon, but you get first access. Off-market
              properties are sold privately with no public listing at all. Both give you a competitive advantage.
            </p>
          </div>
          <div class="faq-item">
            <h3>How quickly do I need to act?</h3>
            <p>
              Off-market opportunities move fast, often within 24-48 hours. Pre-market properties give you
              1-2 weeks before going public. This is why working with a buyers agent is crucial - we move
              quickly on your behalf.
            </p>
          </div>
          <div class="faq-item">
            <h3>Do you charge extra for off-market properties?</h3>
            <p>
              No. Off-market access is included in our standard buyers agent service. Our fee structure
              remains the same whether we find you an on-market or off-market property.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section section">
      <div class="container">
        <h2>Don't Miss the Best Off-Market Deals</h2>
        <p>Get exclusive access to properties before they hit the market. Book your free consultation today.</p>
        <a href="#contact" class="button-primary">Book Free Consultation</a>
        <p class="cta-note">New opportunities added weekly | Act fast</p>
      </div>
    </section>

    <!-- Contact Form Section -->
    <section class="contact-section section" id="contact">
      <div class="container">
        <div class="section-header">
          <h2>Get Notified About Off-Market Properties</h2>
          <p class="section-intro">Be first to know when new off-market properties become available across Brisbane, Gold Coast, and Bali. Complete your profile to receive exclusive alerts.</p>
        </div>

        <div class="cta-box-inline">
          <h3>Get Exclusive Off-Market Property Alerts</h3>
          <p>Access off-market properties before they're publicly listed</p>
          <button class="button-primary open-form-btn">Get Off-Market Property Alerts</button>
        </div>
      </div>
    </section>

    <!-- Progressive Profiling Modal -->
    <div id="lead-form-modal" class="modal">
      <div class="modal-content">
        <button class="modal-close">&times;</button>

        <!-- Step 1: Property Goal -->
        <div class="form-step active" data-step="1">
          <h3>What's your property goal?</h3>
          <div class="button-group">
            <button class="choice-btn" data-value="investment">Investment</button>
            <button class="choice-btn" data-value="owner_occupier">Owner-Occupier</button>
            <button class="choice-btn" data-value="owner_occupier">First Home</button>
            <button class="choice-btn" data-value="both">Upgrading</button>
          </div>
        </div>

        <!-- Step 2: Budget -->
        <div class="form-step" data-step="2">
          <h3>What's your budget range?</h3>
          <div class="button-group">
            <button class="choice-btn" data-value="<$750k">&lt;$750k</button>
            <button class="choice-btn" data-value="$750k-$1.5M">$750k-$1.5M</button>
            <button class="choice-btn" data-value="$1.5M-$3M">$1.5M-$3M</button>
            <button class="choice-btn" data-value="$3M+">$3M+</button>
          </div>
        </div>

        <!-- Step 3: Timeline -->
        <div class="form-step" data-step="3">
          <h3>When are you looking to buy?</h3>
          <div class="button-group">
            <button class="choice-btn" data-value="immediate">0-3 months</button>
            <button class="choice-btn" data-value="3_6_months">3-6 months</button>
            <button class="choice-btn" data-value="6_12_months">6-12 months</button>
            <button class="choice-btn" data-value="exploring">12+ months</button>
          </div>
        </div>

        <!-- Step 4: Contact Info -->
        <div class="form-step" data-step="4">
          <h3 id="modal-heading">Get Notified About Off-Market Properties</h3>
          <form id="contact-form" name="offmarket-alerts">
            <input type="hidden" id="formId" value="3576aeec-7d25-4a89-b648-689efe7f5ee6">
            <input type="hidden" id="pageUri" value="/off-market-properties">
            <input type="hidden" id="leadSource" value="Off-Market Property Alerts">
            <input type="hidden" id="goal-value" name="purchase_purpose" value="">
            <input type="hidden" id="budget-value" name="budget" value="">
            <input type="hidden" id="timeline-value" name="purchase_timeline" value="">

            <div class="form-group">
              <label for="first-name">First Name *</label>
              <input type="text" id="first-name" name="firstName" required>
            </div>

            <div class="form-group">
              <label for="last-name">Last Name *</label>
              <input type="text" id="last-name" name="lastName" required>
            </div>

            <div class="form-group">
              <label for="email">Email *</label>
              <input type="email" id="email" name="email" required>
            </div>

            <div class="form-group">
              <label for="phone">Phone</label>
              <input type="tel" id="phone" name="phone">
            </div>

            <div class="form-group">
              <label for="location">Preferred Location *</label>
              <select id="location" name="location" required>
                <option value="">Select location</option>
                <option value="brisbane">Brisbane</option>
                <option value="gold_coast">Gold Coast</option>
                <option value="bali">Bali</option>
                <option value="multiple">Multiple Locations</option>
              </select>
            </div>

            <div class="checkbox-group">
              <input type="checkbox" id="alerts" name="offMarketAlerts" checked>
              <label for="alerts">I want off-market property alerts</label>
            </div>

            <button type="submit" class="button-primary" id="submitButton">Get Property Alerts →</button>
            <div id="formMessage" class="form-message hidden"></div>
          </form>
        </div>

        <!-- Step 5: Confirmation -->
        <div class="form-step" data-step="5">
          <div class="success-message">
            <h3>Success! You're on the list</h3>
            <p>We'll send you exclusive off-market property alerts matching your criteria.</p>
            <p>You'll be first to know when new opportunities become available.</p>
            <button class="button-secondary modal-close">Close</button>
          </div>
        </div>
      </div>
    </div>
  </main>
  <Footer />
</Layout>

<style>
  .offmarket-hero {
    background-image: url('/assets/images/palm-beach-4221-new.jpg'), linear-gradient(135deg, rgba(90, 91, 84, 0.85), rgba(137, 139, 122, 0.85));
    background-size: cover;
    background-position: center;
    background-blend-mode: overlay;
    color: var(--white);
    text-align: center;
    padding: 60px 20px;
    position: relative;
  }

  .offmarket-hero::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(90, 91, 84, 0.7), rgba(137, 139, 122, 0.7));
    z-index: 0;
  }

  .offmarket-hero .container {
    position: relative;
    z-index: 1;
  }

  .offmarket-hero h1 {
    color: var(--white);
    margin-bottom: 15px;
  }

  .hero-subtitle {
    font-family: var(--font-heading);
    font-size: 20px;
    margin-bottom: 20px;
  }

  .page-header {
    background-color: var(--white);
    padding: 20px 0;
  }

  .breadcrumb-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 14px;
  }

  .breadcrumb {
    font-size: 14px;
    color: var(--text-secondary);
  }

  .breadcrumb a {
    color: var(--text-secondary);
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .breadcrumb a:hover {
    color: var(--primary-green);
    text-decoration: underline;
  }

  .breadcrumb span {
    color: var(--text-primary);
    font-weight: 500;
  }

  .last-updated {
    font-size: 14px;
    color: var(--text-light);
  }


  .hero-description {
    max-width: 700px;
    margin: 0 auto;
    font-size: var(--body-regular);
    line-height: 1.6;
  }

  .info-section {
    background-color: #f9f9f9;
  }

  .section-header {
    text-align: center;
    margin-bottom: 50px;
  }

  .section-header h2 {
    margin-bottom: 20px;
  }

  .info-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 30px;
    margin-bottom: 40px;
  }

  .info-card {
    background: var(--white);
    padding: 30px;
    border-radius: var(--border-radius-small);
  }

  .info-card h3 {
    color: var(--primary-green);
    margin-bottom: 15px;
  }

  .info-card ul {
    margin-top: 15px;
    padding-left: 20px;
  }

  .info-card li {
    margin-bottom: 8px;
  }

  .why-us {
    background: var(--primary-green);
    color: var(--white);
    padding: 30px;
    border-radius: var(--border-radius-small);
    text-align: center;
  }

  .why-us h3 {
    color: var(--white);
    margin-bottom: 15px;
  }

  .current-opportunities {
    background-color: var(--white);
  }

  .section-intro {
    max-width: 700px;
    margin: 0 auto;
    color: var(--text-secondary);
    font-size: 16px;
  }

  .location-filters {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 50px;
  }

  .filter-btn {
    padding: 10px 25px;
    background-color: transparent;
    border: 2px solid var(--primary-green);
    color: var(--primary-green);
    border-radius: 4px;
    font-family: var(--font-heading);
    font-size: 14px;
    text-transform: uppercase;
    transition: all 0.3s ease;
  }

  .filter-btn:hover {
    background-color: var(--primary-green);
    color: var(--white);
  }

  .location-section {
    margin-bottom: 60px;
  }

  .location-section h3 {
    font-size: 28px;
    margin-bottom: 30px;
    color: var(--primary-green);
    text-align: center;
  }

  .properties-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 30px;
    margin-bottom: 30px;
  }

  .view-all-btn {
    display: block;
    text-align: center;
    color: var(--primary-green);
    font-family: var(--font-heading);
    font-size: 16px;
    font-weight: 600;
    margin-top: 30px;
    transition: opacity 0.3s ease;
  }

  .view-all-btn:hover {
    opacity: 0.7;
  }

  .faq-section {
    background-color: #f9f9f9;
  }

  .faq-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 30px;
  }

  .faq-item h3 {
    color: var(--primary-green);
    font-size: 18px;
    margin-bottom: 10px;
  }

  .cta-section {
    background-color: var(--primary-green);
    color: var(--white);
    text-align: center;
  }

  .cta-section h2 {
    color: var(--white);
    margin-bottom: 15px;
  }

  .cta-section p {
    margin-bottom: 25px;
    font-size: var(--body-large);
  }

  .cta-note {
    font-size: 14px;
    margin-top: 20px;
    opacity: 0.9;
  }

  @media (max-width: 1024px) {
    .info-grid,
    .properties-grid {
      grid-template-columns: repeat(2, 1fr);
    }

    .faq-grid {
      grid-template-columns: 1fr;
    }
  }

  .contact-section {
    background-color: var(--white);
  }

  .section-header {
    text-align: center;
    margin-bottom: 50px;
  }

  .section-header h2 {
    margin-bottom: 20px;
  }

  .section-intro {
    max-width: 700px;
    margin: 0 auto;
    color: var(--text-secondary);
    font-size: 16px;
  }

  .cta-box-inline {
    background: linear-gradient(135deg, var(--primary-green), var(--olive-green));
    color: var(--white);
    padding: 50px;
    border-radius: var(--border-radius-small);
    text-align: center;
    max-width: 700px;
    margin: 0 auto;
  }

  .cta-box-inline h3 {
    color: var(--white);
    margin-bottom: 15px;
    font-size: 28px;
  }

  .cta-box-inline p {
    margin-bottom: 25px;
    font-size: 18px;
  }

  /* Modal Styles */
  .modal {
    display: none;
    position: fixed;
    z-index: 10000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    align-items: center;
    justify-content: center;
  }

  .modal.active {
    display: flex;
  }

  .modal-content {
    background-color: var(--white);
    padding: 40px;
    border-radius: var(--border-radius-small);
    max-width: 600px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
  }

  .modal-close {
    position: absolute;
    top: 15px;
    right: 20px;
    font-size: 30px;
    background: none;
    border: none;
    cursor: pointer;
    color: var(--text-light);
  }

  .modal-close:hover {
    color: var(--text-primary);
  }

  .form-step {
    display: none;
  }

  .form-step.active {
    display: block;
  }

  .form-step h3 {
    color: var(--primary-green);
    margin-bottom: 30px;
    text-align: center;
    font-size: 24px;
  }

  .button-group {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
  }

  .choice-btn {
    padding: 20px;
    border: 2px solid var(--primary-green);
    background: var(--white);
    color: var(--primary-green);
    font-family: var(--font-heading);
    font-size: 16px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .choice-btn:hover {
    background: var(--primary-green);
    color: var(--white);
  }

  .form-group {
    margin-bottom: 20px;
  }

  .form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: var(--text-primary);
  }

  .form-group input,
  .form-group select {
    width: 100%;
    padding: 12px;
    border: 2px solid #e0e0e0;
    border-radius: 4px;
    font-size: 16px;
  }

  .form-group input:focus,
  .form-group select:focus {
    outline: none;
    border-color: var(--primary-green);
  }

  .checkbox-group {
    display: flex;
    align-items: center;
    margin-bottom: 25px;
  }

  .checkbox-group input[type="checkbox"] {
    width: auto;
    margin-right: 10px;
  }

  .success-message {
    text-align: center;
    padding: 40px 20px;
  }

  .success-message h3 {
    color: var(--primary-green);
    font-size: 32px;
    margin-bottom: 20px;
  }

  .success-message p {
    font-size: 18px;
    margin-bottom: 15px;
    line-height: 1.6;
  }

  .form-message {
    margin-top: 20px;
    padding: 15px;
    border-radius: var(--border-radius-small);
    text-align: center;
  }

  .form-message.success {
    background-color: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
  }

  .form-message.error {
    background-color: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
  }

  .hidden {
    display: none;
  }

  @media (max-width: 768px) {
    .properties-grid,
    .info-grid {
      grid-template-columns: 1fr;
    }

    .location-filters {
      flex-direction: column;
    }

    .button-group {
      grid-template-columns: 1fr;
    }

    .modal-content {
      padding: 30px 20px;
    }

    .cta-box-inline {
      padding: 30px 20px;
    }
  }
</style>

<script>
  // Progressive Profiling Form Logic
  const modal = document.getElementById('lead-form-modal');
  const openBtns = document.querySelectorAll('.open-form-btn');
  const closeBtns = document.querySelectorAll('.modal-close');
  const choiceBtns = document.querySelectorAll('.choice-btn');
  const contactForm = document.getElementById('contact-form');
  const submitButton = document.getElementById('submitButton');
  const leadSourceInput = document.getElementById('leadSource');

  let formData = {
    goal: '',
    budget: '',
    timeline: ''
  };

  // Open modal
  openBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      modal.classList.add('active');
      showStep(1);
    });
  });

  // Close modal
  closeBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      modal.classList.remove('active');
      resetForm();
    });
  });

  // Click outside modal to close
  modal.addEventListener('click', (e) => {
    if (e.target === modal) {
      modal.classList.remove('active');
      resetForm();
    }
  });

  // Handle choice button clicks
  choiceBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      const step = btn.closest('.form-step').dataset.step;
      const value = btn.dataset.value;

      if (step === '1') {
        formData.goal = value;
        showStep(2);
      } else if (step === '2') {
        formData.budget = value;
        showStep(3);
      } else if (step === '3') {
        formData.timeline = value;
        populateHiddenFields();
        showStep(4);
      }
    });
  });

  // Handle form submission
  contactForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    submitButton.disabled = true;
    submitButton.textContent = 'Sending...';
    const formMessage = document.getElementById('formMessage');
    formMessage.classList.add('hidden');

    const formDataObj = new FormData(contactForm);
    const fields = {};

    fields.firstname = formDataObj.get('firstName');
    fields.lastname = formDataObj.get('lastName');
    fields.email = formDataObj.get('email');
    fields.phone = formDataObj.get('phone') || '';
    fields.wants_agent_call = formDataObj.get('offMarketAlerts') ? 'true' : 'false';
    fields.preferred_location = formDataObj.get('location') || '';
    fields.lead_source = 'Off-Market Property Alerts';
    fields.purchase_purpose = formDataObj.get('purchase_purpose') || '';
    fields.budget_range = formDataObj.get('budget') || '';
    fields.purchase_timeline = formDataObj.get('purchase_timeline') || '';

    const payload = {
      formId: document.getElementById('formId').value,
      fields: fields,
      context: {
        pageUri: window.location.href,
        pageName: 'Off-Market Properties',
        leadSource: 'Off-Market Property Alerts'
      }
    };

    try {
      const response = await fetch('/api/hubspot-form', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });

      const result = await response.json();

      if (response.ok && result.success) {
        showStep(5);
      } else {
        formMessage.textContent = 'There was an error. Please try again or email info@edwardsandsmith.com.au';
        formMessage.className = 'form-message error';
        formMessage.classList.remove('hidden');
      }
    } catch (error) {
      formMessage.textContent = 'There was an error. Please try again or email info@edwardsandsmith.com.au';
      formMessage.className = 'form-message error';
      formMessage.classList.remove('hidden');
    } finally {
      submitButton.disabled = false;
      submitButton.textContent = 'Get Property Alerts →';
    }
  });

  function showStep(stepNumber) {
    document.querySelectorAll('.form-step').forEach(step => {
      step.classList.remove('active');
    });
    document.querySelector(`[data-step="${stepNumber}"]`).classList.add('active');
  }

  function populateHiddenFields() {
    document.getElementById('goal-value').value = formData.goal;
    document.getElementById('budget-value').value = formData.budget;
    document.getElementById('timeline-value').value = formData.timeline;
  }

  function resetForm() {
    formData = { goal: '', budget: '', timeline: '' };
    contactForm.reset();
    showStep(1);
  }
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "How do I get access to off-market properties?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Simply register your interest through our website or book a free consultation. We'll discuss your requirements, budget, and timeline. Once we know you're a serious buyer, we'll start sending you off-market opportunities that match your criteria."
      }
    },
    {
      "@type": "Question",
      "name": "Do I need to be finance approved?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "While not always required, having finance pre-approval significantly increases your chances of securing off-market properties. Sellers and agents want to work with buyers who can move quickly."
      }
    },
    {
      "@type": "Question",
      "name": "Are off-market properties cheaper?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Often yes. With no public competition and motivated sellers seeking a quiet sale, off-market properties can sell for 5-15% below market value. Plus, you save on auction stress and bidding wars."
      }
    },
    {
      "@type": "Question",
      "name": "What's the difference between pre-market and off-market?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Pre-market properties will be publicly listed soon, but you get first access. Off-market properties are sold privately with no public listing at all. Both give you a competitive advantage."
      }
    },
    {
      "@type": "Question",
      "name": "How quickly do I need to act on off-market properties?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Off-market opportunities move fast, often within 24-48 hours. Pre-market properties give you 1-2 weeks before going public. This is why working with a buyers agent is crucial - we move quickly on your behalf."
      }
    },
    {
      "@type": "Question",
      "name": "Do you charge extra for off-market properties?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "No. Off-market access is included in our standard buyers agent service. Our fee structure remains the same whether we find you an on-market or off-market property."
      }
    }
  ]
}
</script>
